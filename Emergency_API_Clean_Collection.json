{
	"info": {
		"_postman_id": "emergency-api-clean",
		"name": "üö® Emergency API - Clean & Organized",
		"description": "Complete API collection organized by user roles for Emergency Response System",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{auth_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-save auth token",
					"if (pm.response.json() && pm.response.json().token) {",
					"    pm.environment.set('auth_token', pm.response.json().token);",
					"}",
					"",
					"// Auto-save user_id",
					"if (pm.response.json() && pm.response.json().user && pm.response.json().user.id) {",
					"    pm.environment.set('user_id', pm.response.json().user.id);",
					"}",
					"",
					"// Auto-save panic_id",
					"if (pm.response.json() && pm.response.json().panic && pm.response.json().panic.id) {",
					"    pm.environment.set('panic_id', pm.response.json().panic.id);",
					"}",
					"",
					"// Auto-save report_id",
					"if (pm.response.json() && pm.response.json().data && pm.response.json().data.id) {",
					"    pm.environment.set('report_id', pm.response.json().data.id);",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://sigap-api-5hk6r.ondigitalocean.app/api",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "üîì Public Authentication",
			"item": [
				{
					"name": "Register User",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"John Doe\",\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\",\n    \"no_telp\": \"081234567890\",\n    \"nik\": \"1234567890123456\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/register",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"register"
							]
						}
					}
				},
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"login"
							]
						}
					}
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refresh_token\": \"your_refresh_token_here\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"refresh"
							]
						}
					}
				}
			]
		},
		{
			"name": "üë§ User Profile",
			"item": [
				{
					"name": "Get My Profile",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/profile",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"profile"
							]
						}
					}
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{user_id}}"
							]
						}
					}
				},
				{
					"name": "Update Profile",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Updated Name\",\n    \"no_telp\": \"081234567890\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{user_id}}"
							]
						}
					}
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"logout"
							]
						}
					}
				}
			]
		},
		{
			"name": "üö® PANIC BUTTON - User",
			"item": [
				{
					"name": "‚ö° EMERGENCY PANIC ALERT",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"latitude\": -6.2088,\n    \"longitude\": 106.8456\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/panic",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"panic"
							]
						}
					}
				},
				{
					"name": "Get Today's Panic Reports",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/panic/today",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"panic",
								"today"
							]
						}
					}
				}
			]
		},
		{
			"name": "üì∑ Photo Reports - User",
			"item": [
				{
					"name": "Get All Reports",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/reports",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reports"
							]
						}
					}
				},
				{
					"name": "Create Report",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"problem_type\": \"Sampah\",\n    \"description\": \"Tumpukan sampah di jalan\",\n    \"latitude\": -6.2088,\n    \"longitude\": 106.8456,\n    \"location_description\": \"Depan kantor kelurahan\",\n    \"photo_url\": \"https://example.com/photo.jpg\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/reports",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reports"
							]
						}
					}
				},
				{
					"name": "Get Report by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/reports/{{report_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reports",
								"{{report_id}}"
							]
						}
					}
				},
				{
					"name": "Update Report",
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"description\": \"Updated description\",\n    \"status\": \"resolved\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/reports/{{report_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reports",
								"{{report_id}}"
							]
						}
					}
				},
				{
					"name": "Delete Report",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/reports/{{report_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reports",
								"{{report_id}}"
							]
						}
					}
				},
				{
					"name": "Upload Photo",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "photo",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/upload-photo",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"upload-photo"
							]
						}
					}
				},
				{
					"name": "Get Problem Types",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/problem-types",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"problem-types"
							]
						}
					}
				}
			]
		},
		{
			"name": "üë®‚Äçüöí RELAWAN Operations",
			"item": [
				{
					"name": "Handle Panic Report",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/panic/{{panic_id}}/handle",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"panic",
								"{{panic_id}}",
								"handle"
							]
						}
					}
				},
				{
					"name": "Resolve Panic Report",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/panic/{{panic_id}}/resolve",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"panic",
								"{{panic_id}}",
								"resolve"
							]
						}
					}
				},
				{
					"name": "Get My Shifts",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/relawan/my-shifts?start_date=2025-06-01&end_date=2025-06-07",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"relawan",
								"my-shifts"
							],
							"query": [
								{
									"key": "start_date",
									"value": "2025-06-01"
								},
								{
									"key": "end_date",
									"value": "2025-06-07"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "üëë ADMIN Management",
			"item": [
				{
					"name": "üìä User Management",
					"item": [
						{
							"name": "Get All Users",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/admin/users",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"users"
									]
								}
							}
						},
						{
							"name": "Get All Relawan",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/admin/relawan",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"relawan"
									]
								}
							}
						},
						{
							"name": "Register New Relawan",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Relawan Baru\",\n    \"email\": \"relawan@example.com\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\",\n    \"no_telp\": \"081234567890\",\n    \"nik\": \"1234567890123456\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/admin/register-relawan",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"register-relawan"
									]
								}
							}
						},
						{
							"name": "Register New Admin",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"name\": \"Admin Baru\",\n    \"email\": \"admin@example.com\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\",\n    \"no_telp\": \"081234567890\",\n    \"nik\": \"1234567890123456\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/admin/register-admin",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"register-admin"
									]
								}
							}
						},
						{
							"name": "Delete User",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/admin/users/{{user_id}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"users",
										"{{user_id}}"
									]
								}
							}
						}
					]
				},
				{
					"name": "üö® Panic Management",
					"item": [
						{
							"name": "Get All Panic Reports",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/admin/panic?status=pending&date=2025-06-02",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"panic"
									],
									"query": [
										{
											"key": "status",
											"value": "pending"
										},
										{
											"key": "date",
											"value": "2025-06-02"
										}
									]
								}
							}
						},
						{
							"name": "Get Relawan On Duty Today",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/admin/relawan-on-duty",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"relawan-on-duty"
									]
								}
							}
						}
					]
				},
				{
					"name": "üìÖ Shift Management",
					"item": [
						{
							"name": "Get All Shifts",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/admin/shifts",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"shifts"
									]
								}
							}
						},
						{
							"name": "Assign Daily Shift",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"relawan_ids\": [1, 2, 3],\n    \"shift_date\": \"2025-06-03\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/admin/shifts",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"shifts"
									]
								}
							}
						},
						{
							"name": "Delete Shifts by Date",
							"request": {
								"method": "DELETE",
								"header": [],
								"url": {
									"raw": "{{base_url}}/admin/shifts/2025-06-03",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"shifts",
										"2025-06-03"
									]
								}
							}
						},
						{
							"name": "Get Available Relawan",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/admin/relawans",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"admin",
										"relawans"
									]
								}
							}
						}
					]
				}
			]
		}
	]
}
